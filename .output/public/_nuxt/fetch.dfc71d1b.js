import{h as D}from"./index.c9d4dc9e.js";import{u as F}from"./asyncData.3e4f1f0c.js";import{n as O,z as c,s as $,A as x}from"./entry.faf371bd.js";function q(n,i,u){const[t={},a]=typeof i=="string"?[{},i]:[i,u],e=O(()=>{let r=n;return typeof r=="function"&&(r=r()),c(r)}),s=t.key||D([a,typeof e.value=="string"?e.value:"",...C(t)]);if(!s||typeof s!="string")throw new TypeError("[nuxt] [useFetch] key must be a string: "+s);if(!n)throw new Error("[nuxt] [useFetch] request is missing.");const f=s===a?"$f"+s:s;if(!t.baseURL&&typeof e.value=="string"&&e.value.startsWith("//"))throw new Error('[nuxt] [useFetch] the request URL must not start with "//".');const{server:h,lazy:l,default:b,transform:d,pick:g,watch:p,immediate:w,getCachedData:v,deep:_,...k}=t,y=$({...x,...k,cache:typeof t.cache=="boolean"?void 0:t.cache}),A={server:h,lazy:l,default:b,transform:d,pick:g,immediate:w,getCachedData:v,deep:_,watch:p===!1?[]:[y,e,...p||[]]};let o;return F(f,()=>{var m;(m=o==null?void 0:o.abort)==null||m.call(o),o=typeof AbortController<"u"?new AbortController:{};const r=c(t.timeout);return r&&setTimeout(()=>o.abort(),r),(t.$fetch||globalThis.$fetch)(e.value,{signal:o.signal,...y})},A)}function C(n){var u;const i=[((u=c(n.method))==null?void 0:u.toUpperCase())||"GET",c(n.baseURL)];for(const t of[n.params||n.query]){const a=c(t);if(!a)continue;const e={},s=Array.isArray(a)?a:Object.entries(a);for(const[f,h]of s)e[c(f)]=c(h);i.push(e)}return i}export{q as u};
